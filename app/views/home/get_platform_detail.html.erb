<% @scenarios = home_get_all_scenarios_info(@image_date,@branch,@device) %>
            <% if @scenarios.size==0%>
            <% else %>
                <table class="table table-wuxia">
                    <thead>
                        <tr>
                            <th>Scenario</th>
                            <th>Status</th>
                            <th>Battery(mA)</th>
                            <th>%</th>
                        </tr>
                    </thead>
                    <tbody>
                    <% if home_get_latest_image_date(@image_date,@branch,@device).nil? %>
                    <% @scenarios.each do |scenario| %>
                        <tr>
                            <td><%= get_scenario_name(scenario.power_scenario_id) %></td>
                            <td>--</td>
                                <td><%=scenario.battery%></td>
                                <td>0</td>
                        </tr>
                        <% end %>
                    <% else%>
            <% @latest_image_date = home_get_latest_image_date(@image_date,@branch,@device).image_date %>
                     <% @scenarios_lastest = home_get_all_scenarios_info(@latest_image_date,@branch,@device) %>
                        <% @scenarios.each do |scenario| %>
                                <% @scenarios_lastest.each do |scenarios_lastest| %>
                                        <% scenario_name_latest = get_scenario_name(scenarios_lastest.power_scenario_id) %>
                                        <% scenario_name = get_scenario_name(scenario.power_scenario_id) %>
                                        <% scenario_error_rate = get_scenario_error_rate(scenario.power_scenario_id) %>
                                        <% if scenario_name==scenario_name_latest %>
                                            <tr>
                                                    <td><%= scenario_name_latest %></td>
                                                    <% if scenario_error_rate.include?"%" %>
                                                        <% scenario_error_rate = scenario_error_rate.chop %>
                                                        <% diff =  ((((scenario.battery.to_f)-(scenarios_lastest.battery.to_f))/(scenarios_lastest.battery.to_f))*100).round(2) %>
                                                    <% else %>
                                                        <% diff =  (scenario.battery.to_f-scenarios_lastest.battery.to_f).round(2) %>
                                                    <% end %>
                                                    <% if scenario.battery > scenarios_lastest.battery%>
                                                    <% if diff > scenario_error_rate.to_f %>
                                                        <td>
                                                                <font color="red" style="font-size:20px;font-weight:bold;text-align:center;">&#8593;</font>
                                                        </td>
                                                        <td style="color:red;"><%= scenario.battery %></td>
                                                        <td style="color:red;">
                                                            <%= diff %>
                                                        %</td>
                                                    <% else %>
                                                        <td>
                                                                <font style="font-size:20px;font-weight:bold;text-align:center;">&#8593;</font>
                                                        </td>
                                                        <td><%= scenario.battery %></td>
                                                        <td>
                                                            <%= diff %>
                                                        %</td>
                                                    <% end %>
                                                    <% else %>
                                                    <% if diff.abs < scenario_error_rate.to_f %>
                                                        <td>
                                                                <font color="green" style="font-size:20px;font-weight:bold;text-align:center;">&#8593;</font>
                                                        </td>
                                                        <td style="color:green"><%= scenario.battery %></td>
                                                        <td style="color:green">
                                                            <%= diff %>
                                                        %</td>
                                                    <% else %>
                                                        <td>
                                                                <font color="red" style="font-size:20px;font-weight:bold;text-align:center;">&#8593;</font>
                                                        </td>
                                                        <td style="color:red;"><%= scenario.battery %></td>
                                                        <td style="color:red;">
                                                            <%= diff %>
                                                        %</td>
                                                    <% end %>
                                                    <% end %>
                                            </tr>
                                        <% end %>
                                    <% end %>
                        <% end %>
                <% end %>
<% end %>
                </tbody>
                </table>
    <!--/table of task list-->

