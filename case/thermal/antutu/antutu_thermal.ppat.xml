<?xml version="1.0"?>

<project name="thermal_antutu" basedir="." default="result">
    <include file="${user.dir}/config/command.xml"/>
    <target name="run">
        <echo message="launch antutu ..."/>
        <AdbCmd cmd="adb shell am start -a android.intent.action.MAIN -c android.intent.category.LAUNCHER -n com.antutu.ABenchMark/.ABenchMarkStart"/>
        <sleep seconds="2"/>
        <echo message="start tc08 cap..."/>
        <RemoteHostCmd server="${power_server}" sleep="false" sample_t="350" file="usb_tc08.log" cmd="usb_tc08.exe usb_tc08.log 500 1 3 AZ810/370 230"/>
        <echo message="start Soc temp cap..."/>
        <HostCmd cmd="./resource/bin/antutu.sh ${adb_device_id}" workingDirectory="${basedir}"/>
    </target>

    <target name="result" depends="run">
        <echo message="back up thermal file"/>
        <HostCmd cmd="mv score.log ${subcase_root}" workingDirectory="${basedir}"/>
        <HostCmd cmd="mv temperature.log ${subcase_root}" workingDirectory="${basedir}"/>
        <copy file="${PT4_SERVER}/usb_tc08.log" todir="${subcase_root}" failonerror="false"/>
        <SyncThermalToDB/>
    </target>

</project>
