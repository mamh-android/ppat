<?xml version="1.0"?>

<project name="thermal_fishing" basedir="." default="result">
    <include file="${user.dir}/config/command.xml"/>

    <target name="run">
        <echo message="launch game fishing ..."/>
        <AdbCmd cmd="adb shell am start -n org.cocos2dx.FishGame/.FishingJoy"/>
        <sleep seconds="20"/>
        <echo message="start tc08 cap..."/>
        <RemoteHostCmd server="${power_server}" sleep="false" sample_t="350" file="usb_tc08.log" cmd="usb_tc08.exe usb_tc08.log 500 1 3 AZ810/370 1800"/>
        <echo message="start Soc temp cap..."/>
        <HostCmd cmd="./resource/bin/fishing.sh ${adb_device_id} ${storage}" workingDirectory="${basedir}"/>
        <AdbCmd cmd="adb shell am force-stop org.cocos2dx.FishGame"/>
    </target>

    <target name="result" depends="run">
        <echo message="back up thermal file"/>
        <HostCmd cmd="mv temperature.log ${subcase_root}" workingDirectory="${basedir}"/>
        <copy file="${PT4_SERVER}/usb_tc08.log" todir="${subcase_root}" failonerror="false"/>
        <SyncThermalToDB/>
    </target>

</project>
