<?xml version="1.0"?>

<project name="power_game_fishing" basedir="." default="run">
    <include file="${user.dir}/config/command.xml"/>
    <taskdef resource="net/sf/antcontrib/antcontrib.properties"/>
    <taskdef resource="net/sf/antcontrib/antlib.xml"/>
    <target name="run">
        <AdbCmd cmd="adb install -r resource/apk/FishGame_V1.8.4.apk"/>
        <AdbCmd cmd="adb shell sync"/>
        <AdbCmd cmd="adb push resource/event/${resolution}/prepare_fishing.evt /${storage}/"/>
        <AdbCmd cmd="adb push resource/event/${resolution}/play_fishing.evt /${storage}/"/>
        <UpdateEvent name="${input_device_name}"/>
        <AdbCmd cmd="adb shell busybox sed -i 's/event[0-9]/event${InputEvent}/g' /${storage}/*.evt"/>

        <Print message="check whether temperature is below 40degC"/>
        <HostCmd cmd="./../resource/bin/prepare_temp.sh ${adb_device_id}" workingDirectory="${basedir}" exitValue="value"/>
        <echo message="return value : ${value}"/>
        <if>
            <equals arg1="${value}" arg2="0"/>
            <then>
                <echo message="OK"/>
            </then>
            <else>
                <echo message="Warning: Temp is still higher than 40degC! Exit!"/>
                <SystemExit exitCode="1"/>
            </else>
        </if>

    </target>

</project>
