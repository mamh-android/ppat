<?xml version="1.0"?>

<project name="start_cpueater" basedir="." default="run">
    <include file="${user.dir}/config/command.xml"/>
    <taskdef resource="net/sf/antcontrib/antcontrib.properties"/>
    <taskdef resource="net/sf/antcontrib/antlib.xml"/>
    <target name="run" >
        <SerialPortCmd cmd="echo a > /sys/power/wake_lock"/>
        <for trim="true" list="${CPU_FREQ}" param="cpu">
            <sequential>
                <echo message="set cpu: @{cpu}"/>
                <SystemProperty key="cpu" value="@{cpu}"/>
                <PropertyMap key="cpu" value="@{cpu}"/>
                <SerialPortCmd cmd="echo @{cpu}000 > /sys/devices/system/cpu/cpu0/cpufreq/scaling_max_freq"/>
                <SerialPortCmd cmd="echo @{cpu}000 > /sys/devices/system/cpu/cpu0/cpufreq/scaling_min_freq"/>
                <SerialPortCmd cmd="echo @{cpu}000 > /sys/devices/system/cpu/cpu0/cpufreq/scaling_max_freq"/>
                <SerialPortCmd cmd="echo @{cpu}000 > /sys/devices/system/cpu/cpu0/cpufreq/scaling_min_freq"/>
                <for trim="true" list="${DDR_FREQ}" param="ddr">
                    <sequential>
                        <echo message="set ddr: @{ddr}"/>
                        <SystemProperty key="ddr" value="@{ddr}"/>
                        <PropertyMap key="ddr" value="@{ddr}"/>
                        <SerialPortCmd cmd="echo @{ddr}000 > /sys/class/devfreq/devfreq-ddr/min_freq"/>
                        <SerialPortCmd cmd="echo @{ddr}000 > /sys/class/devfreq/devfreq-ddr/max_freq"/>
                        <SerialPortCmd cmd="echo @{ddr}000 > /sys/class/devfreq/devfreq-ddr/min_freq"/>
                        <SerialPortCmd cmd="echo @{ddr}000 > /sys/class/devfreq/devfreq-ddr/max_freq"/>
                        <sleep seconds="3"/>
                        <for trim="true" list="${GC3D_FREQ}" param="gpu3d">
                            <sequential>
                                <echo message="set gpu3d: @{gpu3d}"/>
                                <SerialPortCmd cmd="echo @{gpu3d}000 > /sys/devices/platform/soc.2/d4200000.axi/mmp-gpu/gpu/gpu0/gpufreq/scaling_min_freq"/>
                                <SerialPortCmd cmd="echo @{gpu3d}000 > /sys/devices/platform/soc.2/d4200000.axi/mmp-gpu/gpu/gpu0/gpufreq/scaling_max_freq"/>
                                <SerialPortCmd cmd="echo @{gpu3d}000 > /sys/devices/platform/soc.2/d4200000.axi/mmp-gpu/gpu/gpu0/gpufreq/scaling_min_freq"/>
                                <SerialPortCmd cmd="echo @{gpu3d}000 > /sys/devices/platform/soc.2/d4200000.axi/mmp-gpu/gpu/gpu0/gpufreq/scaling_max_freq"/>
                                <SystemProperty key="gpu0" value="@{gpu3d}"/>
                                <PropertyMap key="gpu3d" value="@{gpu3d}"/>
                                <for trim="true" list="${VL}" param="vol">
                                    <sequential>
                                        <SetVol vol="@{vol}"/>
                                        <ant antfile="texture.xml"/>
                                        <echo message="call ant file"/>
                                    </sequential>
                                </for>
                            </sequential>
                        </for>
                    </sequential>
                </for>
            </sequential>
        </for>
        <SerialPortCmd cmd="echo a > /sys/power/wake_unlock"/>
        <PowerCtrlUSB flag="on"/>
    </target>
</project>
